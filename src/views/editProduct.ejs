<!DOCTYPE html>
<html lang="es">
<!-- Include Head -->
<%- include('partials/head', {title: 'Editando: ' + '¿?'}) %>
<body>
	<!-- Header -->
	<%- include('partials/headerNavbar') %>
	<!-- /Header -->

	<div class="container products-wrapper">
		<div class="row">
			<div class="col-12">
				<h2 class="products-title">Estás editando: <i><%= producto.title %></i></h2>
			</div>
		</div>
		<div class="col-12">
			<form action="/products/<%= producto.id %>" method="POST" enctype="multipart/form-data">
				<div class="row product-detail">
					<div class="col-12 col-md-6">
						<label for="name" class="form-label">Nombre del producto:</label>
						<input type="text" id="name" name="title" placeholder="Ej: Zapatillas Reebok" class="form-input" value="<%= producto.title %>">
					</div>
					<div class="col-12 col-md-6">
						<label for="price" class="form-label">Precio del producto:</label>
						<input type="text" id="price" name="price" placeholder="Ej: 5678" class="form-input" value="<%= producto.price %>">
					</div>
					<div class="col-12 col-md-6">
						<label for="discount" class="form-label">Descuento:</label>
						<input type="text" id="discount" name="discount" placeholder="Ej: 15" class="form-input">
					</div>
					<div class="col-12 col-md-6">
						<label for="category" class="form-label">Categoría:</label>
						<select name="category" id="category" class="form-input">
							<option value="">Elegí</option>
							<option value="in-sale">En oferta</option>
							<option value="visited" >Últimos agregados</option>
						</select>
					</div>
					<div class="col-12 col-md-6">
						<label for="discount" class="form-label">Imagen</label>
						<input type="file" name="images" class="form-input input-image" multiple>
					</div>
					<div class="col-12">
						<label for="description" class="form-label">Descripción:</label>
						<textarea name="description" id="description" class="form-input"><%= producto.description %></textarea>
					</div>

					<div class="row justify-content-evenly mt-3">
						<% producto.images.forEach(imagen => { %>
							<div class="col">
							<div class="card" style="width: 18rem; margin:auto">
								<img class="card-img-top" src="/images/products/<%= imagen.path %>" alt="Card image cap">
								<div class="card-body">
									<a href="/products/borrar-imagen/<%= imagen.id %>?product=<%= producto.id %>" class="btn btn-danger">Borrar imagen</a>
								</div>
							</div>
						</div>
						<% }) %>
					</div>

					<img src="" alt="" class="imagen-preview">
					<div class="col-12">
						<button type="submit" class="buy-now-button">Guardar producto</button>
					</div>
				</div>
			</form>
		</div>

	</div>
	<!-- /todos los productos -->

	<!-- footer -->
	<%- include('partials/footer') %>
	<!-- /footer -->

	<!-- <script>
		const imageElement = document.querySelector(".imagen-preview");
		const imageInput = document.querySelector(".input-image");

		imageInput.addEventListener("change", function(e) {
			const [file] = imageInput.files;
			console.log(file)
			if(file){
				imageElement.src = URL.createObjectURL(file)
			}
		})
	</script> -->
</body>	
</html>